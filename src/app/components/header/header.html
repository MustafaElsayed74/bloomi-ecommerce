<header>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <a routerLink="/" class="logo">üå∏ Bloomi Store</a>
            </div>
            <form class="search-bar" (ngSubmit)="onSearch()">
                <input type="text" [(ngModel)]="searchTerm" name="search" placeholder="Search products"
                    aria-label="Search products" (ngModelChange)="onSearchTermChange($event)">
                <button type="submit" aria-label="Search">üîç</button>
            </form>
            <ul class="navbar-menu">
                <li><a routerLink="/products" class="nav-link">üõçÔ∏è Shop</a></li>
                <li *ngIf="(isAuthenticated$ | async)">
                    <a routerLink="/wishlist" class="nav-link wishlist-link" title="My Wishlist">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                            </path>
                        </svg>
                        <span class="wishlist-badge" *ngIf="wishlistItemCount > 0">{{ wishlistItemCount }}</span>
                    </a>
                </li>
                <li><a routerLink="/cart" class="nav-link cart-link">
                        üõí
                        <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
                    </a></li>
                <li *ngIf="isAdmin" class="admin-link">
                    <a routerLink="/admin" class="admin-cta">‚öôÔ∏è Admin Dashboard</a>
                </li>
                <li class="auth-menu">
                    <ng-container *ngIf="(isAuthenticated$ | async); else loginButton">
                        <div class="user-info">
                            <div class="profile-dropdown-container">
                                <div *ngIf="currentUser$ | async as user" class="user-profile"
                                    (click)="toggleProfileDropdown($event)">
                                    <img [src]="user.profilePicture" [alt]="user.name" class="profile-pic">
                                    <span class="user-name">{{ user.name }}</span>
                                    <span class="dropdown-arrow">‚ñº</span>
                                </div>
                                <div class="profile-dropdown" *ngIf="showProfileDropdown">
                                    <a routerLink="/orders" class="dropdown-item" (click)="showProfileDropdown = false">
                                        <span class="dropdown-icon">üì¶</span>
                                        Order History
                                    </a>
                                    <a routerLink="/profile" class="dropdown-item"
                                        (click)="showProfileDropdown = false">
                                        <span class="dropdown-icon">‚öôÔ∏è</span>
                                        Profile Settings
                                    </a>
                                </div>
                            </div>
                            <button (click)="logout()" class="logout-btn">Logout</button>
                        </div>
                    </ng-container>
                    <ng-template #loginButton>
                        <div class="guest-auth-buttons">
                            <a routerLink="/login" class="login-btn">Login</a>
                            <a routerLink="/login" class="signup-btn">Sign Up</a>
                        </div>
                    </ng-template>
                </li>
            </ul>
        </div>
    </nav>
</header>